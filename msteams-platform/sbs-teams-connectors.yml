### YamlMime:Tutorial
title: 生成Teams连接器
metadata:
  title: 生成Teams连接器
  description: 本教程介绍如何设置连接器Teams。
  audience: Developer
  level: Beginner
  ms.date: 02/14/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: webhooks-and-connectors/how-to/connectors-creating.md
  nextTutorialTitle: 详细了解 Webhook 和连接器
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 52c73c6b7574eb592b89ae1f670ca50b192c9a6b
  ms.sourcegitcommit: 3d0cfa779dec6bfc0daa57880ea37ab94f3d426f
  ms.translationtype: MT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 03/14/2022
  ms.locfileid: "63493340"
items:
- durationInMinutes: 1
  content: "Microsoft Teams连接器是模型-视图-控制器 (MVC) 示例任务管理应用程序。 应用程序是使用 web 应用程序 ASP.NET 生成的。 大多数代码与基本 MVC 配置或任务管理系统相关。 可以添加现有 Office 365 连接器，或在 Teams 中生成Teams。\n\n**连接线代码的类型**\n\n  * **ConnectorController.cs**：设置和保存操作\n  * **TaskController.cs**：创建和更新操作\n\n**连接器的关键Microsoft Teams功能**\n\n  * 模拟真实的任务管理系统。\n  * 允许用户创建和查看任务。\n  * 随机生成内容。 \n  * 模拟要发送到频道Microsoft Teams。 \n\n此分步指南可帮助你创建和测试 Microsoft Teams。 你将看到以下输出：\n   \n:::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-meetings-stage-view/mobile.png\" alt-text=\"简介图像\" border=\"true\":::\n   \n"
- title: 先决条件
  durationInMinutes: 1
  content: "确保安装以下工具并设置开发环境： \n\n* [Microsoft Teams](https://teams.microsoft.com/)帐户登录\n* [最新版本Visual Studio](https://visualstudio.microsoft.com/downloads/)\n* [ngrok (](https://ngrok.com/download) 最新版本，仅适用于开发人员) 或任何等效隧道解决方案\n\n  > [!NOTE]\n  > 下载 ngrok 后，注册并安装 [authtoken](https://ngrok.com/download)。\n"
- title: 设置本地环境
  durationInMinutes: 1
  content: "\n1. 打开[Microsoft Teams示例\"](https://github.com/OfficeDev/Microsoft-Teams-Samples)。\n1. 选择 **\"代码\"**。\n1. 从下拉菜单中，选择\"使用桌面 **GitHub打开\"**。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/sbs-meetings-stage-view/clone repository.png\" alt-text=\"克隆存储库\" border=\"true\":::\n\n1. 选择 **克隆**。 \n"
- title: 启用开发人员预览版
  durationInMinutes: 1
  content: "\n1. 在租户的管理控制台中启用应用上载。\n    1. 登录以[Microsoft 365 管理中心](https://admin.microsoft.com/Adminportal/Home?source=applauncher#/homepage#/)管理员凭据登录。\n    1. 在左侧面板中，选择\" **全部显示\"**。\n    1. 选择 **\"Teams**\"。\n\n       :::image type=\"content\" source=\"./assets/images/meeting-token-generator/meeting-token-generator-admincenter.png\" alt-text=\"管理中心菜单\" border=\"true\":::\n\n1.  在左侧面板中，选择\"**Teams应用\"**。\n   \n1.  选择 **\"安装策略\"**。\n\n       :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-setuppolicies.png\" alt-text=\"设置策略\" border=\"true\":::\n\n1.  选择 **\"全局\"**。\n\n      ![全球](~/assets/images/sbs-connector/Global.png)\n\n1.   将 **Upload应用切换到****\"打开\"** 位置。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-toggleOn.png\" alt-text=\"切换为打开\" border=\"true\":::\n\n1.   选择 **保存**。 \n   \n      测试租户可以允许自定义应用旁加载。\n\n      > [!TIP]\n      > 旁加载需要一些时间变为活动状态。\n\n1.   转到 **Microsoft Teams**。\n\n1.   从用户界面的右上角Teams，选择 `...` 。\n\n1.   选择“**关于**”。 \n\n1.   选择 **\"开发人员预览\"**。\n\n      :::image type=\"content\" source=\"~/assets/images/meeting-token-generator/meeting-token-generator-devpreview.png\" alt-text=\"开发者预览版\" border=\"true\":::\n\n1.   选择 **切换到开发人员预览**。\n"
- title: 配置连接器
  durationInMinutes: 1
  content: "\n1. 导航到 **克隆存储库中的 TeamsToDoAppconnector.sln** 。\n\n   ![sln 路径](~/assets/images/sbs-connector/sln.png)\n\n2. 使用 ngrok 或命令提示符创建到本地运行的 Web 服务器的公开可用 HTTPS 终结点的隧道。 在 ngrok 中运行以下命令：\n\n    ```bash\n    ngrok http -host-header=localhost 3978\n    ``` \n   > [!TIP]\n   > 如果遇到 **ERR_NGROK_4018**，请按照命令提示符中显示的步骤注册 ngrok 并进行身份验证。 然后运行命令 `ngrok http -host-header=localhost 3978` 。\n\n   ![ngrok 路径](~/assets/images/sbs-connector/ngrok1.png)\n\n3. 转到 [连接器开发人员门户](https://outlook.office.com/connectors/publish)。\n4. 选择 **\"新建连接器**。\n \n   ![添加新连接器](~/assets/images/sbs-connector/connector.png)\n  \n5. 输入以下详细信息以注册新连接器：\n\n   * **连接器或名称**\n   * **徽标**\n   * **应用的简短说明 (10 个词或更少)**\n   * **连接器执行哪些操作 (3-5 句)**\n   * **公司网站**\n   * **连接器的配置页**`https://[BASE_URI]/connector/setup`\n   * **有效的域** 为 `https Base URL`\n   * 选择 **\"是** \"以启用连接器卡上的操作\n   * **操作 URL** 为 `https://[BASE_URI]/Task/Update`\n   * 选择 **\"我接受应用开发人员协议的条款和条件\"**\n   * 选择“**保存**”\n\n   ![基本详细信息](~/assets/images/sbs-connector/basicdetails.png)\n\n   已成功注册新连接器。 将显示具有注册连接器 ID 的窗口。\n\n   ![输出屏幕](~/assets/images/sbs-connector/output.png)\n  \n   > [!TIP]\n   > 保存连接器 ID 供将来参考。\n\n6. 从 **TeamsToDoAppConnector 文件夹中选择 TeamsToDoAppConnector.csproj** **文件**。\n\n   ![导航路径](~/assets/images/sbs-connector/web.png) \n\n7. 在Visual Studio。 \n\n8. 将 变量 `configuration.appSettings.BaseUrl` 替换为 `ngrok https forwarding url`。\n   \n   ![设置清单](~/assets/images/sbs-connector/manifest.png) \n\n9. 按 **F5** 运行项目。\n   将打开一个网页。 \n\n   ![本地主机](~\\assets\\images/sbs-connector/local-host.png)    \n"
- title: 测试连接器Microsoft Teams
  durationInMinutes: 5
  content: "\n1. 在克隆的存储库中，导航到 **teamsAppPackages > csharp > TeamsAppPackages**。\n\n1. 创建.zip清单文件夹中存在以下 **文件的文件：** \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n   ![清单位置](~/assets/images/sbs-connector/zip.png)\n\n1. 转到 **Microsoft Teams**。\n1. 在左侧面板中，选择 **\"应用商店** > **管理你的应用\"**。\n\n   ![管理应用](~/assets/images/sbs-connector/manageapp.png)\n\n1. 选择“**上传自定义应用**”。\n\n   ![Upload自定义应用](~/assets/images/sbs-connector/upload.png)\n  \n1. 选择 **\"** 打开\"以.zip清单 **文件夹中创建的文件** 。\n\n   ![manifest](~/assets/images/sbs-connector/open.png)\n\n1. 选择 **\"添加到团队\"**。\n\n   ![添加应用](~/assets/images/sbs-connector/addtoteam.png)\n\n1. 从列表中选择团队或频道名称。\n\n   ![选择频道](~/assets/images/sbs-connector/channel.png)\n\n1. 选择 **\"设置连接器\"**。\n\n1. 在左侧面板中，在Teams搜索栏中搜索\"**ToDo 通知** 连接器\"，然后选择\"配置 **\"**。\n\n   ![配置通知](~/assets/images/sbs-connector/configure.png)\n\n1. 在注册 **页面上选择\"已****创建\"** 或\"已更新\"，然后选择\"保存 **\"**。\n\n   ![select](~/assets/images/sbs-connector/create.png)\n\n   配置后，可以在频道中查看通知，并链接到 **任务管理器门户**。\n\n   ![通知邮件](~/assets/images/sbs-connector/notification.png)\n\n12. 转到任务 **管理器门户**。\n\n    ![任务管理器门户](~/assets/images/sbs-connector/taskportal.png)\n\n13. 选择 **\"新建\"**。\n   \n    ![创建新任务](~/assets/images/sbs-connector/tasks.png)\n   \n14. 输入新任务详细信息：\n\n    * **标题**\n    * **说明**\n    * **分配到**\n\n    ![任务详细信息](~/assets/images/sbs-connector/details.png)\n\n15. 选择 **保存**。 \n  \n    邮件卡显示在注册的 Teams 通道中\n   \n    ![消息](~/assets/images/sbs-connector/messagecard.png)\n\n    > [!TIP]\n    > 可以尝试在邮件卡上可用的可操作按钮。\n"
- title: 完成挑战
  durationInMinutes: 1
  content: >
    你提供类似这样的内容了吗？


    :::image type="content" source="../msteams-platform/assets/images/sbs-meetings-stage-view/mobile.png" alt-text="最终输出" border="true":::
- content: 已完成教程，开始使用Microsoft Teams **连接器**！
