### YamlMime:Tutorial
title: Tab 设备权限
metadata:
  title: Tab 设备权限
  description: 本教程介绍如何向选项卡设备授予对应用Microsoft Teams权限。
  audience: Developer
  level: Beginner
  ms.date: 12/24/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: concepts/device-capabilities/browser-device-permissions.md
  nextTutorialTitle: 详细了解浏览器的设备权限
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: b1ba241b5ba6aa2f95e8948ef7a87a99bd0b732b
  ms.sourcegitcommit: 4892d8d0fa38a472edab047754ef85b1a85be495
  ms.translationtype: MT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 12/27/2021
  ms.locfileid: "61608532"
items:
- durationInMinutes: 1
  content: >
    > [!NOTE]

    > 有关如何在浏览器中处理设备权限的最新更新当前仅适用于公共开发人员 [预览](resources/dev-preview/developer-preview-intro.md) 版。 此更新将于 2022 年 2 (通用) 正式发布。


    Teams需要设备权限（如位置、相机或麦克风访问）的应用现在要求用户在 Web 浏览器中按应用级别手动授予权限。 以前，浏览器已处理如何授予访问权限，但现在这些权限在Microsoft Teams。


    此分步指南可帮助你执行选项卡设备权限Microsoft Teams。 你将看到以下输出：

      ![desktop3](~/assets/images/tab-device-permission/sbs-tab-device-permission-location.PNG)
- title: 先决条件
  durationInMinutes: 1
  content: "确保安装以下工具并设置开发环境：  \n\n* 安装 [ngrok](https://ngrok.com/) 或等效隧道解决方案。\n* 安装 [Node.js](https://nodejs.org/en/)。\n* Visual Studio Code或最新版本。\n* [Microsoft 365开发者帐户](https://docs.microsoft.com/en-us/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant)或Teams具有安装应用的适当权限的帐户。\n"
- title: 配置并运行选项卡设备权限应用Teams
  durationInMinutes: 1
  content: "测试应用最全面的方式是创建应用包并将其上传到Teams。 此方法是在所有范围内测试应用可用的完整功能的唯一方法。 \n\n若要通过上载 Teams文件配置并运行manifest.zip应用程序，请执行下列操作：\n\n1. 配置并运行选项卡设备权限应用。\n2. 开始隧道服务，获取 https 终结点。\n3. 运行选项卡设备权限，在 manifest.zip 文件Teams。\n\n**配置并运行选项卡设备权限应用：**\n\n1. 打开 **命令提示符** 并克隆存储库 **git https://github.com/OfficeDev/Microsoft-Teams-Samples.git clone**。 确保记下 **克隆** 存储库的路径。\n2. 在文件资源管理器中，转到 **microsoft-Teams-Samples >示例 > tab-device-permissions > nodejs** 文件夹并复制文件夹位置。\n3. 在命令 **提示符中**， (**\"节点 js 文件夹**) cd 位置，然后运行此命令。\n4. 在命令提示符中 **运行以下命令**：\n\n   ```command-prompt\n    npm install\n    ```\n5. 使用下列命令在 **命令提示符** 中运行应用程序：\n\n   ```command-prompt\n   npm start\n   ```\n6. 您可以在浏览器中看到以下输出：\n\n   ![react](~/assets/images/tab-device-permission/sbs-react.PNG)\n\n**开始隧道服务以获取 https 终结点：**\n\n1. 转到 **Microsoft-Teams-Samples > nodejs > tab-device-permissions >示例**。\n2. 打开 **ngrok** 终端，并运行以下命令启动 ngrok 隧道 (您需要 https 终结点来更新清单文件) ：\n\n   ```ngrok\n   ngrok http 3000 --host-header=localhost\n   ```  \n    \n**若要通过上传选项卡设备权限，manifest.zip以下Teams：**\n\n1. 在文件资源管理器中，转到 **microsoft-Teams-Samples >示例 > tab-device-permissions > appPackage > nodejs。**\n2. 在 visual studio code 中打开 **manifest.json** 文件。\n3. 在 **manifest.json** 文件中，查找<<BASE_URI_DOMAIN>>并将其替换为 ngrok 中的 https 终结点（不包括所有位置中的\"https://\"部分）。\n\n   ![ngrok](~/assets/images/tab-device-permission/ngrok-tunnel.PNG)\n\n4. Zip the files in the **appPackage/folder** as manifest.zip.\n5. 使用Teams ID 在浏览器中打开\"登录\"。\n6. 若要上传 **manifest.zip，** 请选择应用 **> Upload自定义应用，然后****打开** manifest.zip。\n7. 选择 **选项卡设备权限** 应用。\n8. 选择 **\"添加** \"以添加选项卡设备权限应用。\n\n    ![addbrowserteams](~/assets/images/tab-device-permission/sbs-add-browser-teams.png)\n\n9. 打开 **选项卡设备权限** ，然后选择 **设备权限选项卡** 以查看以下输出：\n\n    ![desktopteams](~/assets/images/tab-device-permission/sbs-tab-device-permission-browser-mobile-get-location.png)\n\n10. 打开Teams查看以下输出：\n\n    ![mobileteams](~/assets/images/tab-device-permission/mobile-teams-output.png)\n\n11. 打开桌面Teams。\n12. 若要上传 **manifest.zip，** 请选择应用 **> Upload自定义应用，然后****打开** manifest.zip。\n13. 选择 **\"** 添加\"以添加选项卡设备权限应用，你将看到以下输出：  \n\n    ![desktopteams](~/assets/images/tab-device-permission/dekstop-tab-device-permission.png)\n"
- title: 测试应用
  durationInMinutes: 1
  content: "若要确保选项卡设备权限应用允许用户授予权限，必须在将应用成功上载到 Teams 后测试该应用。\n\n # <a name=\"desktop\"></a>[桌面设备](#tab/Desktop)\n\n  若要在桌面上测试应用，请选择\" **应用** 权限\"图标并获取以下提示以接受权限请求：\n\n   ![desktoppermissionteams](~/assets/images\\tab-device-permission\\desktop-teams-permission.png)\n\n  # <a name=\"browser\"></a>[Browser](#tab/Browser)\n\n  若要在浏览器中测试应用，请选择\" **获取位置** \"以查看以下输出：\n\n   ![locationresultbrowserteams](~/assets/images/tab-device-permission/sbs-location-result.png)\n\n # <a name=\"mobile\"></a>[移动设备](#tab/Mobile)\n\n  若要在移动设备上测试应用，请选择相应的按钮以测试方案，并获取以下提示以接受权限请求：\n\n   ![mobileappteams](~/assets/images/tab-device-permission/prompt-mobile-app.png)\n\n--- \n"
- title: 完成挑战
  durationInMinutes: 1
  content: >
    你提供类似这样的内容了吗？

      ![tabdeviceimage](~/assets/images/tab-device-permission/sbs-tab-device-permission-location.PNG)
- content: 你已完成本教程，现在可以在应用上授予选项卡Microsoft Teams权限。
