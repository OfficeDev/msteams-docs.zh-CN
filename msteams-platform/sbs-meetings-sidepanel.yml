### YamlMime:Tutorial
title: 生成会议侧面板
metadata:
  title: 会议侧面板
  description: 通过此学习模块，了解如何生成会议侧面板以添加和发布 Teams 的议程。
  audience: Developer
  level: Beginner
  ms.date: 12/06/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: apps-in-teams-meetings/build-tabs-for-meeting.md
  nextTutorialTitle: 阅读详细信息以启用和配置会议应用
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: 8d985b0890570e00a2b3af244f99d3adadc69697
  ms.sourcegitcommit: 88fb2e9a18de3bd84e3c604ff235fc753c8de8f5
  ms.translationtype: MT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 11/02/2022
  ms.locfileid: "68818634"
items:
- durationInMinutes: 1
  content: >
    会议侧面板可增强会议中体验，并帮助组织者和演示者拥有不同的视图和操作集。


    会议侧面板的主要功能包括：


    * 添加新议程点的规定。

    * 将议程作为文本输入添加到侧面板列表。

    * 将议程列表发布到会议聊天。


    本分步指南可帮助你生成会议侧面板以添加和发布议程。 你将看到以下输出：

       :::image type="content" source="~/assets/images/meetings-side-panel/sidepanelondesktopmobile_1.png" alt-text="你的令牌":::
- title: 先决条件
  durationInMinutes: 1
  content: "确保安装以下工具并设置开发环境：  \n\n | &nbsp; | 安装 | 用于使用... |\n | --- | --- | --- |\n | **Required** | &nbsp; | &nbsp; |\n | &nbsp; | [Microsoft Teams](https://www.microsoft.com/microsoft-teams/download-app) | Microsoft Teams 可在一个位置通过聊天、会议、通话等应用与你合作的每个人进行协作。|\n | &nbsp; | [Visual Studio 2022 版本 17.3](https://visualstudio.microsoft.com)<br> 安装以下两个工作负载之一：<br> • ASP.NET 和 Web 开发 <br> • .NET Core 跨平台开发 | 可以在 Visual Studio 2022 中安装企业版，并安装工作负载。 |\n | &nbsp; | [.NET Core SDK 版本 3.1](https://dotnet.microsoft.com/en-us/download) | 用于本地调试和 Azure Functions 应用部署的自定义绑定。 如果尚未全局安装 .NET 3.1 (或更高版本) SDK，则可以安装可移植版本。 |\n | &nbsp; | [Node.js 和 npm](https://nodejs.org/) | 后端 JavaScript 运行时环境。 使用最新的 v16 LTS 版本。|\n | &nbsp; | [最新版本的 Teams SDK](/javascript/api/overview/msteams-client?view=msteams-client-js-latest&preserve-view=true) | 可以使用 npm 或 yarn 安装包。 |\n | &nbsp; | [ngrok](https://ngrok.com/download) | teams 应用功能 (对话机器人、消息扩展和传入 Webhook) 需要入站连接。 隧道将开发系统连接到 Teams。 对于仅包含选项卡的应用，这不是必需的。 此包使用 npm `devDependencies`) 安装在项目目录 (中。 |\n | &nbsp; | [SignalR](/aspnet/signalr/overview/getting-started/tutorial-getting-started-with-signalr-and-mvc) | 安装 以实时更新议程。 |\n\n  > [!NOTE]\n  > 下载 ngrok 后，注册并安装 [authtoken](https://ngrok.com/download)。\n"
- title: 设置本地环境
  durationInMinutes: 1
  content: "\n1. 打开 [Microsoft Teams 示例](https://github.com/OfficeDev/Microsoft-Teams-Samples)。\n1. 选择“ **代码**”。\n1. 在下拉菜单中，选择“ **使用 GitHub Desktop 打开**”。\n\n   :::image type=\"content\" source=\"./assets/images/meetings-side-panel/clonerepository_1.png\" alt-text= \"Clone repository.\":::\n\n1. 选择“ **克隆**”。 \n        \n   > [!NOTE]\n   > 如果遇到错误“文件名太长”，请在所选的管理员终端中应用 git 命令 `git config --system core.longpaths true` 。\n"
- title: 创建并注册机器人
  durationInMinutes: 5
  content: "若要在 Microsoft Azure Active Directory (Azure AD) 中创建和注册机器人，请执行以下步骤：\n\n* 创建 Azure 机器人资源以将机器人注册到 Azure 机器人服务。\n* 创建客户端密码以启用单一登录 (SSO) 机器人身份验证。\n* 添加 Teams 频道以部署机器人。\n* 创建到 Web 服务器终结点的 ngrok 隧道。\n* 将消息传递终结点添加到创建的 ngrok 隧道。\n\n**创建 Azure 机器人资源**\n\n1. 转到“[Azure 门户](https://portal.azure.com/)”。\n1. 选择“**创建资源**”。\n1. 在搜索框中，输入 **Azure 机器人**。\n1. 选择“**Enter**”。\n1. 选择“ **Azure 机器人**”。\n1. 选择“**创建**”。\n\n   :::image type=\"content\" source=\"./assets/images/meetings-side-panel/azure-bot_1.png\" alt-text=\"Azure 机器人。\":::\n\n此时会显示 **“创建 Azure 机器人**”窗口。\n\n1. 在机器人句柄中输入所需的 **机器人句柄** 名称。\n1. 从相应的下拉列表中选择 **“订阅** ”和“ **资源组** ”。\n   \n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/review-plus-create.png\" alt-text=\"选择资源 Azure 机器人\":::\n\n   可以创建新的资源组。 选择“ **新建** >输入资源名称>选择 **”确定**”。 从 **“新建资源组** 位置”下拉列表中选择所需位置。\n   有关详细信息，请参阅 [创建资源组](/azure/azure-resource-manager/management/manage-resource-groups-portal#create-resource-groups)。\n\n   :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"新建资源组位置\":::\n\n1. 在 **“Microsoft 应用 ID** ”部分中，默认选择“ **创建新的 Microsoft 应用 ID** ”。 \n\n    可以选择“ **使用现有应用注册** ”，并输入现有 **应用 ID**、 **应用租户 ID** 和 **MSI 资源 ID**。\n\n   > [!NOTE]\n   > 不能使用相同的 **Microsoft 应用 ID** 创建多个机器人。\n\n1. 选择 **“应用类型** ”作为 **“多租户**”。\n\n1. 然后“**审阅 + 创建**”。\n\n   :::image type=\"content\" source=\"./assets/images/meetings-side-panel/tenant-review_1.png\" alt-text=\"租户评审。\":::\n\n1. 如果已通过验证，请选择“ **创建**”。\n\n    预配机器人服务需要一些时间。 \n\n1. 选择“**转到资源**”。 \n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/botdeployment_1.png\" alt-text=\"部署应用\":::\n\n    已创建 Azure 机器人。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/bot-page_1.png\" alt-text=\"创建的 Azure 机器人资源\":::\n\n**创建客户端密码**\n\n  如果已创建新的 **Microsoft 应用 ID**，请执行以下步骤：\n\n1. 在左窗格中，选择“ **配置**”。 \n\n   > [!TIP]\n   > 保存 **Microsoft 应用 ID** 或 **客户端 ID** 以供将来参考。\n\n1. 在 **“Microsoft 应用 ID**”旁边，选择“ **管理**”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manage-bot-label_1.png\" alt-text=\"管理机器人\":::\n\n1. 在 **“客户端机密** ”部分中，选择“ **新建客户端密码**”。 \n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/newclientsecret_2.png\" alt-text=\"显示新客户端密码选择的屏幕截图。\":::\n\n   此时会显示 **“添加客户端密码**”窗口。  \n\n1. 输入客户端密码 **的“说明** ”。\n\n1. 选择“**添加**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientsecret_1.png\" alt-text=\"向应用添加客户端密码\":::\n\n1. 选择“ **复制到剪贴板** ”以复制 **“值** 详细信息”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientvalue.png\" alt-text=\"客户端密码的值\":::\n   \n   > [!TIP]\n   > 保存 **客户端机密** 值或应用密码以供将来参考。\n\n**添加 Teams 频道**\n\n1. 选择“主页”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/gotohome_1.png\" alt-text=\"主页\":::\n\n1. 从 **“最近使用的资源**”中选择机器人。\n\n1. 在左窗格中选择“**频道**”，然后选择“**Microsoft Teams**” <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>.\n\n   :::image type=\"content\" source=\"./assets/images/meetings-side-panel/channel-teams_1.png\" alt-text=\"选择“Teams”。\":::\n\n1. 选中复选框以接受 **服务条款**。\n\n1. 选择“ **同意**”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/terms_2.png\" alt-text=\"服务条款\":::\n\n1. 选择“**应用**”。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/teams-file-upload-bot/apply-teams_1.png\" alt-text=\"microsoft teams\":::\n\n**为本地 Web 服务器创建隧道**\n\n使用 ngrok 创建到本地运行的 Web 服务器的公开可用 HTTPS 终结点的隧道。 在 ngrok 中运行以下命令：\n\n ```bash\n ngrok http --host-header=localhost 3001\n ```\n\n> [!TIP]\n> 如果遇到 **ERR_NGROK_4018**，请按照命令提示符中提供的步骤注册并验证 ngrok。 然后运行 命令 `ngrok http --host-header=localhost 3001` 。\n\n**添加消息传送终结点**\n\n1. 从 ngrok 复制 HTTPS URL。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/meetings-side-panel/ngrok-url_1.png\" alt-text=\"ngrok HTTPS URL\":::\n\n    > [!NOTE]\n    > ngrok 中的 HTTPS URL 是不包含 `https://`的域名。\n\n1. 在 **设置** 中，选择“**配置**”。\n\n1. 在 **消息终结点** 中，从 ngrok 添加 HTTPS URL，并在 URL 末尾添加 /api/messages。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/messaging-endpoint_1.png\" alt-text=\"消息传送终结点\":::\n\n1. 选择“**应用**”。\n\n    已成功在 Azure 机器人服务中设置机器人。\n"
- title: 更新 Azure AD 应用注册
  durationInMinutes: 1
  content: "\n1. 转到“[Azure 门户](https://portal.azure.com/)”。\n\n1. 选择“Azure Active Directory”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/AAD.png\" alt-text=\"AAD\":::\n\n1. 在左侧导航窗格中，选择“ **应用注册**”。\n\n1. 选择机器人。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appregister_2.png\" alt-text=\"应用注册\":::\n\n1. 在“**管理**”下，选择“**公开 API**”。\n\n1. 选择“ **设置**”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/exposeanapi_1.png\" alt-text=\"公开 API\":::\n\n1. 以 的形式`api://your ngrok/botid-{AppID}`设置 **应用程序 ID URI**。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/setlink_1.png\" alt-text=\"设置链接\":::\n    \n   下图显示了域名：\n    \n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appIDuri_1.png\" alt-text=\"App ID URI\":::\n\n    > [!NOTE]\n    > 如果使用 ngrok 等隧道服务，请确保在 ngrok 子域发生更改时更新值。\n    > 例如： `api://f631****.ngrok.io/92c11075-c629-4a1e-ab58-02b4fd4204c2`，其中 `f631****.ngrok.io` 是新的 ngrok 子域名称。\n\n1. 选择“**添加作用域**”。 \n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/meetings-side-panel/selectscope_1.png\" alt-text=\"选择作用域\":::\n\n  此时会显示 **“添加范围**”窗口。\n\n1. 输入以下详细信息以配置范围：\n\n     * 输入 `access_as_user` 作为 **作用域名称**。\n\n     * 将 **“谁可以同意？”** 设置为 `Admins and users`。\n\n1. 若要使用适当的范围值 `access_as_user` 配置管理员和用户同意提示，请在字段中提供以下信息：</br>\n\n     * 输入`Teams can access the user’s profile`作为 **管理员同意显示名称**。\n\n     * 输入`Allows Teams to call the app’s web APIs as the current user`作为 **管理员同意说明**。\n\n     * 输入 `Teams can access the user profile and make requests on the user’s behalf` 作为 **用户同意显示名称**。\n\n     * 输入 `Enable Teams to call this app’s APIs with the same rights as the user` 作为 **用户同意说明**。\n\n1. 将 **“状态”** 设置为 **“已启用**”。\n\n1. 选择“**添加作用域**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addascope_2.png\" alt-text=\"添加范围\":::\n\n    > [!NOTE]\n    > **作用域名称** 应与末尾追加的应用程序 **ID** URI `/access_as_user` 匹配。</br>\n       `api://*******.ngrok.io/00000000-0000-0000-0000-000000000000/access_as_user`\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/scopes_1.png\" alt-text=\"Scopes\":::\n\n1. 在“**授权客户端应用程序**”部分中，确定要授权给应用的 Web 应用程序的应用程序。 \n\n1. 选择 **添加客户端应用程序**。 \n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectclientapp.png\" alt-text=\"选择客户端应用程序\":::\n\n1. 输入以下每个客户端 ID 并选择授权范围：\n\n   * 对于 Teams 移动或桌面应用程序，输入 **客户端 ID**： `1fec8e78-bce4-4aaf-ab1b-5451cc387264` 。 \n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addclientapplication1.png\" alt-text=\"添加客户端应用程序 1\"::: \n\n   * 对于 Teams Web 应用程序，输入 **客户端 ID**： `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` 。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addclientapplication2.png\" alt-text=\"添加客户端应用程序 2\":::\n\n1. 选择 **“授权的范围**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/authorizedscope_1.png\" alt-text=\"添加客户端应用程序 2\":::\n\n   下图显示了客户端 ID：\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientapps.png\" alt-text=\"客户端应用程序\"::: \n\n1. 在左窗格中，选择“ **API 权限**”。 \n\n   > [!NOTE]\n   > 仅当 Azure AD 应用在不同租户中注册时，用户才需要同意这些权限。\n\n1. 选择 **“添加权限** > **”“Microsoft Graph”**\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addpermission_1.png\" alt-text=\"添加权限\"::: \n\n1. 选择“**委托的权限**”。\n\n1. 添加以下 API 权限：</br>\n     * **email**\n     * **offline_access**\n     * **Openid**\n     * **个人资料**\n     * **User.Read**\n\n1. 选择 **添加权限**。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/other-permissions_1.png\" alt-text=\"其他权限\":::\n\n1. 在左窗格中，选择“ **身份验证** ”以设置重定向 URI。 \n\n   > [!NOTE]\n   > 如果未向应用授予 IT 管理员同意，用户必须在首次使用应用时提供同意。\n           \n     1. 选择 **“添加平台** > **Web**”。\n\n        :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/webauth_1.png\" alt-text=\"Web\":::\n\n     1. 通过追加 `auth-end` 到域名，输入应用的重定向 URI：</br> \n       `https://your ngrok/auth-end`. </br>\n\n     1. 通过选中以下复选框启用 **隐式授予和混合流** ：\n         * **(用于隐式流) 的 ID 令牌**\n         * **(用于隐式流和混合流) 的访问令牌**\n\n     1. 选择“**配置**”。\n\n         :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/authend_1.png\" alt-text=\"Auth-end\":::\n"
- title: 设置应用设置和清单文件
  durationInMinutes: 1
  content: "1. 转到克隆存储库中的 **appsettings.json** 。\n\n      :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appsettingslocation_1.png\" alt-text=\"应用设置位置\":::\n\n1. 在 Visual Studio 中打开 **appsettings.json** 并更新以下信息：  \n\n     * 将 替换为 `\"MicrosoftAppId\"` 机器人的 **Microsoft 应用 ID**。\n     * 将 替换为 `\"MicrosoftAppPassword\"` 机器人的客户端机密 ID **值**。\n     * 将 替换为 `\"BaseUrl\"` ngrok 域名。\n\n      :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appsettings_1.png\" alt-text=\"应用设置\":::\n      \n\n1. 转到克隆存储库中的 **manifest.json** 。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manifestlocation_1.png\" alt-text=\"清单文件位置\":::\n\n1. 在 Visual Studio 中打开 **manifest.json** 并进行以下更改：\n\n     * 将 的所有匹配项 `<<Your_Domain_URL>>` 替换为 ngrok 域名。\n     * 将 的所有匹配项 `<<Microsoft-App-ID>>` 替换为机器人的 **Microsoft 应用 ID**。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manifest-2_1.png\" alt-text=\"清单映像 2\":::\n"
- title: 生成并运行服务
  durationInMinutes: 1
  content: "**使用最新版本的 Visual Studio 或命令行生成和运行服务**\n\n# <a name=\"visual-studio\"></a>[Visual Studio](#tab/vs)\n\n   1. 打开 **Visual Studio**。\n   1. 转到 **“文件** > **打开** > **项目/解决方案**”。\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/open-project1.png\" alt-text=\"打开文件\":::\n\n   1. 从 **csharp** 文件夹中选择 **SidePanel.csproj** 文件。\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/Tokenfileready_1.png\" alt-text=\"解决方案文件\":::\n\n   1. 按 **F5** 运行项目。 可以在相应的文件夹中使用 Visual Studio 或 .NET 运行。\n\n   1. 导航到 `samples\\meetings-sidepanel\\csharp\\ClientApp` 文件夹并执行命令。\n\n       ```bash\n       npx @fluidframework/azure-local-service@latest\n       ```\n\n   1. 如果出现以下对话框，请选择“**是**”：\n\n        :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/certificate.png\" alt-text=\"信任证书\":::\n\n      此时会显示一个网页，其中包含 **消息“机器人已准备就绪！”**。\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appisready_1.png\" alt-text=\"应用就绪\"::: \n\n    \n# <a name=\"command-line\"></a>[命令行](#tab/cli)\n\n在命令提示符窗口中 **转到示例> meetings-sidepanel > csharp > Side Panel** ，然后输入以下命令：\n\n```bash\ndotnet run\n```\n:::image type=\"content\" source=\"~/assets/images/meetings-side-panel/dotnetruncmd.png\" alt-text=\"Dotnet\"::: \n  \n"
- title: 将会议侧面板添加到 Teams
  durationInMinutes: 1
  content: "\n1. 在克隆的存储库中，转到 **csharp > 侧面板>清单**。\n\n1. 使用 **清单** 文件夹中存在的以下文件创建.zip： \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/zipfile_1.png\" alt-text=\"Zip 文件\"::: \n\n1. 创建包含几个演示者和与会者的会议。\n\n1. 创建会议后，转到会议详细信息页，然后选择 **“应用** ”以添加应用。\n\n1. 在弹出窗口中，选择“ **管理应用**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manageapps_1.png\" alt-text=\"管理应用\"::: \n\n1. 选择“**上传自定义应用**”。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/uploadcustomapp_1.png\" alt-text=\"上传自定义应用\"::: \n\n1. 选择“ **打开** ”以上传在 **“清单”** 文件夹中创建的.zip文件。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectzip_1.png\" alt-text=\"选择 zip 文件\"::: \n\n1. 选择“**添加**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addtheapp_1.png\" alt-text=\"添加应用\"::: \n\n   “ **管理应用** ”部分显示应用程序列表。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manageappsection_1.png\" alt-text=\"管理应用中的应用\"::: \n\n1. 转到 Teams 会议。\n\n1. 选择“**应用**”。 \n\n   在应用选择页中，显示 **侧面板** 应用。\n\n1. 选择 **“侧面板”** 应用。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appicon-2.png\" alt-text=\"Teams 中的应用图标\"::: \n\n1. 选择“**保存**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/welcomeapp_1.png\" alt-text=\"欢迎应用\"::: \n\n   应用在会议侧面板中可见。         \n"
- title: 在 Teams 中与应用交互
  durationInMinutes: 1
  content: "让我们在 Teams 中与应用交互！\n\n1. 选择“ **添加新议程项** ”，将新议程添加到默认议程列表。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/sidepanelinmeet_1.png\" alt-text=\"Meet 中的令牌\"::: \n\n1. 输入新的议程项，然后选择“ **添加**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/newagenda_1.png\" alt-text=\"新议程\"::: \n\n   新议程将添加到列表中。\n\n1. 选择 **“发布议程**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/youragenda_1.png\" alt-text=\"你的令牌\"::: \n\n   新的议程列表显示在会议聊天中。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/agendainchat_1.png\" alt-text=\"你的令牌\"::: \n"
- title: 完成挑战
  durationInMinutes: 1
  content: "你想出了这样的输出吗？\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/sidepanelondesktopmobile_1.png\" alt-text=\"Meet 中的令牌\"::: \n"
- content: 你已完成本教程以开始使用 **侧面板** 应用！
