### YamlMime:Tutorial
title: 会议 SidePanel
metadata:
  title: 会议 SidePanel
  description: 本教程介绍如何为会议设置会议Teams。
  audience: Developer
  level: Beginner
  ms.date: 12/06/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: apps-in-teams-meetings/enable-and-configure-your-app-for-teams-meetings.md
  nextTutorialTitle: 阅读更多内容以启用和配置会议应用
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: a75d40159b317f06922cb452f849811d647f3af2
  ms.sourcegitcommit: 2fdca6fb0ade3f6b460eb9a4dfea0a8e2ab8d3b9
  ms.translationtype: MT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 03/08/2022
  ms.locfileid: "63355608"
items:
- durationInMinutes: 1
  content: "增强 `meetingSidePanel` 你的会议体验。 你可以帮助组织者和演示者拥有一组不同的视图和操作。\n\n此分步指南演示如何实施 **侧面板** 应用以添加和发布议程。\n\n**会议组织者与会议 SidePanel 的交互**\n\n* **添加新议程：** 提供添加新议程点的规定。\n* **添加**：将议程作为文本输入添加到 **侧面板** 议程列表。\n* **发布议程**：将议程列表发送到会议聊天。 \n\n你将看到以下输出：\n\n ![你的令牌](~/assets/images/meetings-side-panel/sidepanelondesktopmobile.png)\n"
- title: 先决条件
  durationInMinutes: 1
  content: "确保安装以下工具并设置开发环境：  \n\n* [.NET Core SDK](https://dotnet.microsoft.com/download) 版本 3.1\n* [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/)\n* [nodejs](https://nodejs.org/en/download/) LTS 版本 10.21.0 或更高版本\n* [ngrok](https://ngrok.com/download) 最新版本 (仅用于开发人员) 或任何等效隧道解决方案\n\n  > [!NOTE]\n  > 下载 ngrok 后，注册并安装 [authtoken](https://ngrok.com/download)。\n\n* [Microsoft Teams](https://teams.microsoft.com/)帐户登录\n* [实时](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/tutorial-getting-started-with-signalr-and-mvc) 更新议程的信号R\n\n> [!NOTE]\n> 使用 Teams SDK 的版本 1.7.0 或更高版本，[因为它](/javascript/api/overview/msteams-client?view=msteams-client-js-latest&preserve-view=true)之前的版本不支持会议侧窗格。\n"
- title: 设置本地环境
  durationInMinutes: 1
  content: "将`Microsoft-Teams-Samples`存储库克隆到本地GitHub：  \n\n 1. 打开[Microsoft Teams示例\"](https://github.com/OfficeDev/Microsoft-Teams-Samples)。\n 1. 选择 **\"代码\"**。\n 1. 从下拉菜单中，选择\"使用桌面 **GitHub打开\"**。\n\n    ![克隆存储库](~/assets/images/meetings-side-panel/clonerepository1.png)\n\n 1. 选择 **克隆**。 \n"
- title: 在门户创建和注册Azure AD程序
  durationInMinutes: 5
  content: "若要在 Azure Active Directory 创建和注册机器人，使用 ngrok 创建隧道并添加消息终结点，请执行以下步骤：\n\n* 创建 Azure Bot 资源以向 Azure Bot 服务注册自动程序。\n* 创建客户端密码以启用自动程序 SSO 身份验证。\n* 添加Microsoft Teams将聊天机器人部署到 Teams 频道。\n* 使用 ngrok 创建到 Web 服务器的终结点的隧道。\n* 将消息终结点添加到您创建的 ngrok 隧道。\n\n**创建 Azure Bot 资源**\n\n1. 转到 Microsoft Azure [门户](https://portal.azure.com/)。\n1. 选择“**创建资源**”。\n1. 在搜索框中，输入 **Azure Bot**。\n1. 选择 **Enter**。\n1. 选择 **\"Azure 自动程序\"**。\n\n     ![创建 Azure 自动程序卡](~/assets/images/bots/createazurebot.png)\n\n1. 选择 **“创建”**。\n1. 在自动程序句柄中输入所需的 **自动程序句柄名称**。\n1. 从\" **订阅** \"下拉列表中，选择 **\"msteams.nonprod.pub.msft.aplt\"**。\n1. 从\" **资源组** \"下拉列表中，选择现有资源组。 \n\n    ![选择资源 Azure 自动程序](~/assets/images/meetings-side-panel/review-plus-create.png) \n\n   还可以创建新的资源组， **(\"创建新** 资源>输入资源名称 **>选择\"** 确定) \"。\n\n1. 如果已新建资源组，请从\"新建资源组位置\"下拉列表 **中选择** 所需位置。\n\n    ![新资源组位置](~/assets/images/meetings-side-panel/newresource.png)\n\n1. 在\" **Microsoft 应用 ID\"** 部分，默认情况下 **选择\"创建新的 Microsoft 应用 ID** \"。 \n\n   可以选择\"使用现有 **应用注册\"并** 输入 **\"现有应用 ID**\"和\"现有应用密码\"，也可以选择\"**创建新的 Microsoft 应用 ID\"**。\n\n   > [!NOTE]\n   > 不能创建多个使用相同 **Microsoft 应用 ID 的机器人**。\n\n1. 然后“**审阅 + 创建**”。\n\n    ![创建 Microsoft 应用 ID](~/assets/images/meeting-token-generator/meeting-token-generator-appidcreate.png)\n\n1. 如果验证通过，请选择\"创建 **\"**。 \n\n    设置自动程序服务需要一些时间。 \n\n1. 选择“**转到资源**”。 \n\n    ![部署应用](~/assets/images/meetings-side-panel/botdeployment.png)\n\n    已创建 Azure 自动程序。\n\n    ![已创建 Azure 自动程序资源](~/assets/images/meetings-side-panel/bot-page.png)\n\n**创建客户端密码**\n\n  如果已新建 Microsoft 应用 **ID，请执行以下步骤**：\n\n1. 在左侧面板中，选择\" **配置\"**。 \n\n   > [!TIP]\n   > 保存 **Microsoft 应用 ID** 或 **客户端 ID** 供将来参考。\n\n1. 选择 **\"自动程序类型\"** 下的\" **多租户\"**。\n\n    ![自动程序类型](~/assets/images/meetings-side-panel/bot-type.png)\n\n1. 在 **\"Microsoft 应用 ID\"旁边，** 选择\" **管理\"**。\n\n    ![Microsoft 应用 ID](~/assets/images/meetings-side-panel/config.png)\n\n1. 在\" **客户端密码\"** 部分，选择 **\"新建客户端密码\"**。 \n\n    ![新客户端密码](~/assets/images/meetings-side-panel/newclientsecret.png)\n\n   将显示 **\"添加客户端密码\"** 窗口。  \n\n1. 输入 **\"说明\"**。\n\n1. 选择“**添加**”。\n\n    ![将客户端密码添加到应用](~/assets/images/meetings-side-panel/clientsecret.png)\n\n1. 在\" **值\"** 列中，选择 **\"复制到剪贴板\"**。\n\n     ![客户端密码的值](~/assets/images/meetings-side-panel/clientvalue.png)\n   \n   > [!TIP]\n   > 保存 **客户端密码** 值或应用密码，供将来参考。\n\n**添加Microsoft Teams频道**\n\n1. 选择“主页”。\n\n    ![主页](~/assets/images/meetings-side-panel/gotohome.png)\n\n1. 从\"最近使用的资源 **\"中选择自动程序**。\n\n1. 选择 **左** 窗格中的\"频道\"。 \n\n1. 选择 **Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>.\n\n1. 选中复选框以接受 **服务条款**。\n\n1. 选择\" **同意\"**。\n\n      ![服务条款](~/assets/images/meetings-side-panel/terms.png)\n\n1. 选择“**保存**”。\n\n      ![选择Teams](~/assets/images/meetings-side-panel/config-teams1.png)   \n\n**为本地 Web 服务器创建隧道**\n\n使用 ngrok 创建到本地运行的 Web 服务器的公开可用 HTTPS 终结点的隧道。 在 ngrok 中运行以下命令：\n\n ```bash\n ngrok http -host-header=localhost 3978\n ```\n\n> [!TIP]\n> 如果遇到 **ERR_NGROK_4018**，请按照命令提示符中提供的步骤注册 ngrok 并进行身份验证。 然后运行命令 `ngrok http -host-header=localhost 3978` 。\n\n**添加消息终结点**\n\n1. 从 ngrok 中，将 HTTPS URL (https 复制到 io) 。\n\n    ![ngrok HTTPS URL](~/assets/images/meetings-side-panel/ngrok1.png)\n\n    > [!NOTE]\n    > ngrok 中的 HTTPS URL 是您的完全限定域名。\n    > `WebAppDomain`是不包括的完全限定`https://`域名。\n\n1. In **设置** for the Azure bot that you created， select **Configuration**.\n\n1. 在 **消息终结点中**，使用 ngrok 和 URL 末尾的 HTTPS URL 添加 **/api/messages**。\n\n    ![消息终结点](~/assets/images/meetings-side-panel/messaging-endpoint.png)\n\n1. 选择“**应用**”。\n\n    你已成功在 Azure Bot 服务中设置自动程序。\n"
- title: 更新Azure AD应用注册
  durationInMinutes: 1
  content: "**通过 Azure AD 门户注册应用**  \n\n1. 转到“[Azure 门户](https://portal.azure.com/)”。\n\n1. 选择“Azure Active Directory”。\n\n1. 在左侧导航面板中，选择 **\"应用注册\"**。\n\n1. 选择自动程序。\n\n   ![应用注册](~/assets/images/meetings-side-panel/appregister.png)\n\n1. 在“**管理**”下，选择“**公开 API**”。\n\n1. 选择 **\"设置\"**。\n\n   ![公开 API](~/assets/images/meetings-side-panel/exposeanapi.png)\n\n1. 以 **的形式设置应用程序 ID URI**`api://{AppID}`。\n\n   ![设置链接](~/assets/images/meetings-side-panel/setlink.png)\n\n1. 在 和 `WebAppDomain` 之间插入 `api://` 值 `/{AppID}`。</br>\n    `api://4d52****.ngrok.io/{AppID}`</br>\n    \n   下图显示了域名：\n    \n    ![App ID URI](~/assets/images/meetings-side-panel/appIDuri.png)\n\n    > [!NOTE]\n    > 如果您使用的是隧道服务（如 ngrok），请确保在 ngrok 子域发生更改时更新该值。\n    > `For example: api://f631****.ngrok.io/92c11075-c629-4a1e-ab58-02b4fd4204c2`，其中 `f631****.ngrok.io` 是新的 ngrok 子域名称。\n\n1. 选择“**添加作用域**”。 \n\n   ![选择范围](~/assets/selectscope.png)\n\n1. 在出现的面板中，输入 作为`access_as_user`**范围名称**。\n\n1. 将 **Who可以同意？** 设置为 `Admins and users`。\n\n1. 若要使用作用域的适当 `access_as_user` 值配置管理员和用户同意提示，在字段中提供以下信息：</br>\n\n     * 输入 `Teams can access the user’s profile` 作为 **管理员同意显示名称**。\n\n     * 输入 `Allows Teams to call the app’s web APIs as the current user` 作为 **管理员同意说明**。\n\n     * 输入 `Teams can access the user profile and make requests on the user’s behalf` 作为 **用户同意显示名称**。\n\n     * 输入 `Enable Teams to call this app’s APIs with the same rights as the user` 作为 **用户同意说明**。\n\n1. 确保将“状态”设置为“已启用”。\n\n1. 选择要 **保存的\"添加** 范围\"。\n\n    ![添加范围](~/assets/images/meetings-side-panel/addascope.png)\n\n    > [!NOTE]\n    > 范围 **名称** 应匹配应用程序 **ID** URI，并 `/access_as_user` 追加到末尾。</br>\n       `api://4d52****.ngrok.io/00000000-0000-0000-0000-000000000000/access_as_user`\n\n    ![Scopes](~/assets/images/meetings-side-panel/scopes.png) \n\n1. 在“**授权客户端应用程序**”部分中，确定要授权给应用的 Web 应用程序的应用程序。 \n\n1. 选择 **添加客户端应用程序**。 \n\n    ![选择客户端应用程序](~/assets/images/meetings-side-panel/selectclientapp.png) \n\n1. 输入 **客户端 ID**：`1fec8e78-bce4-4aaf-ab1b-5451cc387264`用于Teams或桌面应用程序。 \n\n    ![添加客户端应用程序 1](~/assets/images/meetings-side-panel/addclientapplication1.png) \n\n   可以输入 **客户端 ID**：`5e3ce6c0-2b1f-4285-8d4b-75ee78787346`用于Teams Web 应用程序。\n\n    ![添加客户端应用程序 2](~/assets/images/meetings-side-panel/addclientapplication2.png) \n\n1. 选择 **\"授权范围\"**。\n\n    ![添加客户端应用程序 2](~/assets/images/meetings-side-panel/authorizedscope.png) \n\n   下图显示了客户端 ID：\n\n    ![客户端应用程序](~/assets/images/meetings-side-panel/clientapps.png) \n\n1. 在左侧面板中，选择 **\"API 权限\"**。 \n\n   > [!NOTE]\n   > 只有在应用程序注册到其他租户Azure AD用户才需要同意这些权限。\n\n1. 选择“**添加权限**”。\n\n    ![添加权限](~/assets/add-permission.png)\n\n1. 选择 **\"Microsoft Graph\"**。\n\n1. 选择“**委托的权限**”。\n\n    默认情况下， **将选择 User.Read** 。\n\n     ![用户](~/assets/images/meetings-side-panel/userpermission.png)\n\n1. 添加以下权限：</br>\n     * **email**\n     * **offline_access**\n     * **OpenId**\n     * **个人资料**\n\n1. 选择 **添加权限**。\n\n     ![其他权限](~/assets/images/meetings-side-panel/other-permissions.png)\n\n1. 从左侧面板中，选择 **\"身份验证** \"以设置重定向 URI。 \n\n   > [!NOTE]\n   > 如果未向应用授予 IT 管理员同意，用户必须在第一次使用应用时提供同意。\n           \n     1. 选择 **添加平台**。\n     1. 选择“Web”\n\n        ![Web](~/assets/images/meetings-side-panel/webauth.png)\n\n     1. 通过追加到完全限定的域名，输入 `auth-end` 应用的重定向 URI：</br> \n       `https://4d52****.ngrok.io/auth-end`. </br>\n\n     1. 通过 **选中以下复选框** 启用隐式授予和混合流：\n         * **ID 令牌**\n         * **访问令牌**\n\n     1. 选择“**配置**”。\n\n        ![Auth-end](~/assets/images/meetings-side-panel/authend.png)\n"
- title: 设置应用设置和清单文件
  durationInMinutes: 1
  content: "1. 导航到 **克隆存储库中的 appsettings.json** 。\n\n    ![应用设置位置](~/assets/images/meetings-side-panel/appsettingslocation.png)\n\n1. 在 Visual Studio **2019** 中打开 **appsettings.json** 并更新以下信息：  \n\n     * 设置为 `\"MicrosoftAppId\"` 自动程序 **Microsoft 应用 ID**。\n     * 设置为 `\"MicrosoftAppPassword\"` 自动程序客户端密码 ID 值。\n     * 设置为 `\"BaseUrl\"` 完全限定的域名。\n\n    ![应用设置](~/assets/images/meetings-side-panel/appsettings.png)\n\n1. 导航到 **克隆存储库中的 manifest.json** 。\n\n    ![清单文件位置](~/assets/images/meetings-side-panel/manifestlocation.png)\n\n1. Open **manifest.json** in **Visual Studio 2019** and make the following changes：\n\n     * 将 的所有匹配项 `<<Your_Domain_URL>>` 替换为完全限定的域名。\n     * 将 的所有匹配项 `<<Microsoft-App-ID>>` 替换为自动程序 **Microsoft 应用 ID**。\n\n    ![清单图像 2](~/assets/images/meetings-side-panel/manifest-2.png)\n"
- title: 生成并运行服务
  durationInMinutes: 1
  content: "**使用 2019 或命令行Visual Studio和运行服务**\n\n# <a name=\"visual-studio-2019\"></a>[Visual Studio 2019](#tab/vs2019)\n\n   1. 在 **2019 Visual Studio启动**。\n   1. 导航到 **\"文件** > **Project** > **/解决方案\"**。\n\n      ![打开文件](~/assets/images/meeting-token-generator/meeting-token-generator-VSopenfile.png)\n\n   1. 从 **csharp 文件夹中选择 SidePanel.sln** 文件。\n\n      ![解决方案文件](~/assets/images/meetings-side-panel/Tokenfileready.png)\n\n   1. 按 **F5** 运行项目。\n\n   1. 如果 **显示** 以下对话框，请选择\"是\"：\n\n      ![信任证书](~/assets/images/meeting-token-generator/meeting-token-generator-certificate.png)\n\n      网页随即打开，显示消息 **\"自动程序已准备就绪！\"**。\n\n      ![应用就绪](~/assets/images/meetings-side-panel/appisready.png) \n\n    \n# <a name=\"command-line\"></a>[命令行](#tab/cli)\n\n导航到>提示符窗口中> **csharp >面板** 中的会议侧窗格示例，然后输入以下命令：\n\n```bash\ndotnet run\n```\n\n![Dotnet](~/assets/images/meetings-side-panel/dotnetruncmd.png)\n  \n"
- title: 将会议侧窗格应用添加到Teams
  durationInMinutes: 1
  content: "**创建会议Teams添加会议侧窗格应用**\n\n1. 在克隆的存储库中，导航到 **\"csharp\">\"侧面板>清单\"**。\n\n1. 创建.zip清单文件夹中存在以下 **文件的文件：** \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n   ![Zip 文件](~/assets/images/meetings-side-panel/zipfile.png) \n\n1. 创建一个与几个演示者和与会者的会议。\n\n1. 创建会议后，转到会议详细信息页面，然后选择\" **添加应用\"**。\n\n   ![添加应用](~/assets/images/meetings-side-panel/addanapp.png) \n\n1. 在打开的弹出窗口中，选择\" **管理应用\"**。\n\n   ![管理应用](~/assets/meeting-token-generator-manageapps.png)\n\n1. 选择 **Upload自定义应用\"** \n\n   ![Upload自定义应用](~/assets/images/meetings-side-panel/uploadcustomapp.png)\n\n1. 选择 **\"** 打开\"以.zip清单 **文件夹中创建的文件** 。\n\n   ![选择 zip 文件](~/assets/images/meetings-side-panel/selectzip.png)\n\n1. 选择“**添加**”。\n\n   ![添加应用](~/assets/images/meetings-side-panel/addtheapp.png)\n\n   \" **管理应用程序** \"部分显示应用程序列表。\n\n   ![管理应用中的应用](~/assets/images/meetings-side-panel/manageappsection.png)\n\n1. 转到Teams会议。\n\n1. 选择“**添加应用**”。 \n\n   在应用选择页面中，应用显示为侧 **面板**。\n\n   ![应用中的应用Teams](~/assets/images/meetings-side-panel/appicon.png)\n\n1. 选择侧 **面板** 应用。\n\n1. 选择“**保存**”。\n\n   ![欢迎应用](~/assets/images/meetings-side-panel/welcomeapp.png)\n\n   该应用在会议 SidePanel 中可见。         \n"
- title: 与应用中的应用Teams
  durationInMinutes: 1
  content: >
    让我们在应用中与应用Teams！


    1. 选择 **"添加新议程项目** "，将新议程添加到默认议程列表。

       ![Meet 中的标记](~/assets/images/meetings-side-panel/sidepanelinmeet.png)

    1. 在列表中输入新的议程项，然后选择"添加 **"**。

       ![Meet 中的标记](~/assets/images/meetings-side-panel/newagenda.png)

       新议程将添加到列表中。

    1. 选择 **"发布议程"**。

       ![你的令牌](~/assets/images/meetings-side-panel/youragenda.png)

       新的议程列表将显示在会议聊天中。

       ![你的令牌](~/assets/images/meetings-side-panel/agendainchat.png)
- title: 完成挑战
  durationInMinutes: 1
  content: >
    你提供类似这样的内容了吗？

       ![Meet 中的标记](~/assets/images/meetings-side-panel/sidepanelondesktopmobile.png)
- content: 你已完成了开始使用侧面板 **应用的** 教程！
