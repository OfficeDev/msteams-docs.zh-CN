### YamlMime:Tutorial
title: 生成会议侧面板
metadata:
  title: 会议侧面板
  description: 使用此学习模块，了解如何生成会议侧面板来添加和发布 Teams 的议程。
  audience: Developer
  level: Beginner
  ms.date: 12/06/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: apps-in-teams-meetings/enable-and-configure-your-app-for-teams-meetings.md
  nextTutorialTitle: 详细了解如何为会议启用和配置应用
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: e0ac9bfd5ff6840b632ee2ea483035593d74d7bc
  ms.sourcegitcommit: 42602e8ec917f5033c0b6a95cf65b428db3c5b0a
  ms.translationtype: MT
  ms.contentlocale: zh-CN
  ms.lasthandoff: 08/09/2022
  ms.locfileid: "67286152"
items:
- durationInMinutes: 1
  content: >
    会议侧面板可增强会议内体验，并帮助组织者和演示者获得不同的观点和操作集。


    会议侧面板的主要功能


    * 添加新议程点的预配。

    * 将议程作为文本输入添加到 **侧面板** 列表。

    * 将议程列表发布到会议聊天。


    本分步指南可帮助你生成会议旁面板来添加和发布议程。 你将看到以下输出：

       :::image type="content" source="~/assets/images/meetings-side-panel/sidepanelondesktopmobile.png" alt-text="令牌":::
- title: 先决条件
  durationInMinutes: 1
  content: "确保安装以下工具并设置开发环境：  \n\n* 具有有效帐户[的 Microsoft Teams](https://teams.microsoft.com/)\n* [最新版本的 Teams SDK](/javascript/api/overview/msteams-client?view=msteams-client-js-latest&preserve-view=true)\n* [最新版本 of.NET 核心 SDK](https://dotnet.microsoft.com/download) \n* [最新版本的 Visual Studio](https://visualstudio.microsoft.com/downloads/)\n* [nodejs 的最新版本](https://nodejs.org/en/download/)\n* 实时更新议程的 [SignalR](/aspnet/signalr/overview/getting-started/tutorial-getting-started-with-signalr-and-mvc)\n* 最新[版本的 ngrok](https://ngrok.com/download) 仅用于开发人员箱测试或任何等效的隧道解决方案\n\n  > [!NOTE]\n  > 下载 ngrok 后，注册并安装 [身份验证](https://ngrok.com/download)。\n"
- title: 设置本地环境
  durationInMinutes: 1
  content: "\n1. 打开 [Microsoft Teams 示例](https://github.com/OfficeDev/Microsoft-Teams-Samples)。\n1. 选择 **“代码**”。\n1. 在下拉菜单中，选择 **“使用 GitHub Desktop 打开**”。\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clonerepository1.png\" alt-text=\"克隆存储库\":::\n\n1. 选择 **“克隆**”。 \n"
- title: 创建和注册机器人
  durationInMinutes: 5
  content: "以下步骤可帮助你在Azure 门户中创建和注册机器人。\n\n* 创建 Azure 机器人资源以将机器人注册到 Azure 机器人服务。\n* 创建客户端机密以启用机器人的 SSO 身份验证。\n* 添加 Teams 通道以部署机器人。\n* 使用 ngrok 创建到 Web 服务器终结点的隧道。\n* 将消息传送终结点添加到创建的 ngrok 隧道。\n\n**创建 Azure 机器人资源**\n\n1. 转到“[Azure 门户](https://portal.azure.com/)”。\n1. 选择“**创建资源**”。\n1. 在搜索框中，输入 **Azure 机器人**。\n1. 选择“**Enter**”。\n1. 选择 **Azure 机器人**。\n\n     :::image type=\"content\" source=\"./assets/images/azure-bot.png\" alt-text=\"Azure 机器人。\":::\n\n1. 选择“**创建**”。\n1. 在 **机器人句柄** 中输入所需的机器人句柄名称。\n1. 从下拉列表中选择 **订阅** 。\n1. 从下拉列表中选择 **资源组** 。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/review-plus-create.png\" alt-text=\"选择资源 Azure 机器人\":::\n\n   还可以创建新的资源组 (选择 **“新建** >输入资源名称>选择 **”确定** “) 。\n\n1. 如果已创建新的资源组，请从 **“新建资源组”位置** 下拉列表中选择所需的位置。\n\n      :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"新的资源组位置\":::\n\n1. 在 **“Microsoft 应用 ID”** 部分中，默认选择 **“新建 Microsoft 应用 ID** ”。 \n\n   可以选择 **“使用现有应用注册** ”并输入 **现有应用 ID** 和 **现有应用密码**，也可以选择 **“创建新的 Microsoft 应用 ID**”。\n\n   > [!NOTE]\n   > 不能创建具有相同 **Microsoft 应用 ID** 的多个机器人。\n\n1. 选择 **“应用类型”** 作为 **多租户**。\n\n1. 然后“**审阅 + 创建**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/Review-create.png\" alt-text=\"创建 Microsoft 应用 ID\":::\n\n1. 如果验证通过，请选择“**创建**”。 \n\n    预配机器人服务需要一些时间。 \n\n1. 选择“**转到资源**”。 \n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/botdeployment.png\" alt-text=\"部署应用\":::\n\n    Azure 机器人已创建。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/bot-page.png\" alt-text=\"创建的 Azure 机器人资源\":::\n\n**创建客户端机密**\n\n  如果已创建新的 **Microsoft 应用 ID**，请执行以下步骤：\n\n1. 在左侧面板中，选择 **“配置**”。 \n\n   > [!TIP]\n   > 保存 **Microsoft 应用 ID** 或 **客户端 ID** 以供将来参考。\n\n1. 在 **Microsoft 应用 ID** 旁边，选择 **“管理**”。\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"管理机器人\":::\n\n1. 在 **“客户端机密** ”部分中，选择 **“新建客户端机密**”。 \n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/newclientsecret.png\" alt-text=\"新客户端机密\":::\n\n   将显示 **“添加客户端机密** ”窗口。  \n\n1. 输入 **说明**。\n\n1. 选择“**添加**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientsecret.png\" alt-text=\"将客户端机密添加到应用\":::\n\n1. 在 **“值** ”列中，选择 **“复制到剪贴板**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientvalue.png\" alt-text=\"客户端机密的值\":::\n   \n   > [!TIP]\n   > 保存 **客户端机密** 值或应用密码以供将来参考。\n\n**添加 Teams 频道**\n\n1. 选择“主页”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/gotohome.png\" alt-text=\"主页\":::\n\n1. 从 **最近的资源** 中选择机器人。\n\n1. 在左窗格中选择 **“通道**”，然后选择 **“Microsoft Teams**” <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>.\n\n    :::image type=\"content\" source=\"./assets/images/adaptive-cards/channel-teams.png\" alt-text=\"选择 Teams。\":::\n\n1. 选中该复选框以接受 **服务条款**。\n\n1. 选择 **“同意**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/terms-of-service1.png\" alt-text=\"服务条款\":::\n\n1. 选择“**应用**”。  \n\n**为本地 Web 服务器创建隧道**\n\n使用 ngrok 创建到本地运行的 Web 服务器的公开可用 HTTPS 终结点的隧道。 在 ngrok 中运行以下命令：\n\n ```bash\n ngrok http --host-header=localhost 3978\n ```\n\n> [!TIP]\n> 如果遇到 **ERR_NGROK_4018**，请按照命令提示符中提供的步骤注册 ngrok 并进行身份验证。 然后运行该 `ngrok http --host-header=localhost 3978` 命令。\n\n**添加消息传送终结点**\n\n1. 从 ngrok 复制 HTTPS URL。\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"ngrok HTTPS URL\":::\n\n    > [!NOTE]\n    > ngrok 中的 HTTPS URL 是完全限定的域名。\n    > 这是 `WebAppDomain` 一个完全限定的域名，不包括 `https://` 在其中。\n\n1. 在创建的 Azure 机器人 **的“设置”** 中，选择 **“配置**”。\n\n1. 在 **消息传送终结点** 中，使用 ngrok 提供的 HTTPS URL，并在 URL 末尾添加 **/api/messages**。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/messaging-endpoint.png\" alt-text=\"消息传送终结点\":::\n\n1. 选择“**应用**”。\n\n    已在 Azure 机器人服务中成功设置机器人。\n"
- title: 更新 Azure AD 应用注册
  durationInMinutes: 1
  content: "\n1. 转到“[Azure 门户](https://portal.azure.com/)”。\n\n1. 选择“Azure Active Directory”。\n\n1. 在左侧导航面板中，选择 **“应用注册**”。\n\n1. 选择机器人。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appregister.png\" alt-text=\"应用注册\":::\n\n1. 在“**管理**”下，选择“**公开 API**”。\n\n1. 选择 **“设置**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/exposeanapi.png\" alt-text=\"公开 API\":::\n\n1. 设置应用程序 **ID URI** 的形式 `api://your ngrok/botid-{AppID}`。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/setlink.png\" alt-text=\"设置链接\":::\n    \n   下图显示了域名：\n    \n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appIDuri.png\" alt-text=\"App ID URI\":::\n\n    > [!NOTE]\n    > 如果使用的是隧道服务（如 ngrok），请确保在 ngrok 子域发生更改时更新该值。\n    > `For example: api://f631****.ngrok.io/92c11075-c629-4a1e-ab58-02b4fd4204c2`，新的 ngrok 子域名称在哪里 `f631****.ngrok.io` 。\n\n1. 选择“**添加作用域**”。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectscope.png\" alt-text=\"选择作用域\":::\n\n1. 在显示的面板中，输入 `access_as_user` 为 **范围名称**。\n\n1. 将 **谁可以同意？** `Admins and users`\n\n1. 若要配置具有相应作用域值 `access_as_user` 的管理员和用户同意提示，请在字段中提供以下信息：</br>\n\n     * 输入`Teams can access the user’s profile`为 **管理员许可显示名称**。\n\n     * 输入`Allows Teams to call the app’s web APIs as the current user`为 **管理员同意说明**。\n\n     * 输入 `Teams can access the user profile and make requests on the user’s behalf` 为 **用户同意显示名称**。\n\n     * 输入 `Enable Teams to call this app’s APIs with the same rights as the user` 为 **用户同意说明**。\n\n1. 确保将“状态”设置为“已启用”。\n\n1. 选择 **“添加范围** ”以保存。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addascope.png\" alt-text=\"添加范围\":::\n\n    > [!NOTE]\n    > **范围名称** 应与应用程序 **ID** URI 匹配，`/access_as_user`并追加在末尾。</br>\n       `api://4d52****.ngrok.io/00000000-0000-0000-0000-000000000000/access_as_user`\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/scopes.png\" alt-text=\"Scopes\":::\n\n1. 在“**授权客户端应用程序**”部分中，确定要授权给应用的 Web 应用程序的应用程序。 \n\n1. 选择 **添加客户端应用程序**。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectclientapp.png\" alt-text=\"选择客户端应用程序\":::\n\n1. 输入 **客户端 ID**： `1fec8e78-bce4-4aaf-ab1b-5451cc387264` 适用于 Teams 移动或桌面应用程序。 \n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addclientapplication1.png\" alt-text=\"添加客户端应用程序 1\"::: \n\n   可以输入 **客户端 ID**： `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` 适用于 Teams Web 应用程序。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addclientapplication2.png\" alt-text=\"添加客户端应用程序 2\":::\n\n1. 选择 **“已授权”范围**。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/authorizedscope.png\" alt-text=\"添加客户端应用程序 2\":::\n\n   下图显示客户端 ID：\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/clientapps.png\" alt-text=\"客户端应用程序\"::: \n\n1. 在左侧面板中，选择 **API 权限**。 \n\n   > [!NOTE]\n   > 仅当 Azure AD 应用在其他租户中注册时，用户才需要同意这些权限。\n\n1. 选择“**添加权限**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addpermission.png\" alt-text=\"添加权限\"::: \n\n1. 选择 **Microsoft Graph**。\n\n1. 选择“**委托的权限**”。\n\n1. 添加以下权限：</br>\n     * **email**\n     * **offline_access**\n     * **Openid**\n     * **个人资料**\n     * **User.Read**\n\n1. 选择 **添加权限**。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/other-permissions.png\" alt-text=\"其他权限\":::\n\n1. 在左侧面板中，选择 **“身份验证** ”以设置重定向 URI。 \n\n   > [!NOTE]\n   > 如果未向应用授予 IT 管理员许可，则用户必须在第一次使用应用时提供同意。\n           \n     1. 选择 **添加平台**。\n     1. 选择“Web”\n\n         :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/webauth.png\" alt-text=\"Web\":::\n\n     1. 通过追加到完全限定的域名，输入应用的 `auth-end` 重定向 URI：</br> \n       `https://your ngrok/auth-end`. </br>\n\n     1. 通过选择以下复选框启用 **隐式授予和混合流** ：\n         * **ID 令牌**\n         * **访问令牌**\n\n     1. 选择“**配置**”。\n\n         :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/authend.png\" alt-text=\"Auth-end\":::\n"
- title: 设置应用设置和清单文件
  durationInMinutes: 1
  content: "1. 导航到克隆存储库中的 **appsettings.json** 。\n\n      :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appsettingslocation.png\" alt-text=\"应用设置位置\":::\n\n1. 在 Visual Studio 中打开 **appsettings.json** 并更新以下信息：  \n\n     * 设置 `\"MicrosoftAppId\"` 为机器人的 **Microsoft 应用 ID**。\n     * 设置 `\"MicrosoftAppPassword\"` 为机器人的客户端机密 ID 值。\n     * 设置 `\"BaseUrl\"` 为完全限定的 ngrok 域名。\n\n      :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appsettings.png\" alt-text=\"应用设置\":::\n      \n\n1. 导航到克隆存储库中的 **manifest.json** 。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manifestlocation.png\" alt-text=\"清单文件位置\":::\n\n1. 在 Visual Studio 中打开 **manifest.json** 并进行以下更改：\n\n     * 将所有匹配项 `<<Your_Domain_URL>>` 替换为完全限定的 ngrok 域名。\n     * 将所有事件 `<<Microsoft-App-ID>>` 替换为机器人的 **Microsoft 应用 ID**。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manifest-2.png\" alt-text=\"清单映像 2\":::\n"
- title: 生成并运行服务
  durationInMinutes: 1
  content: "**使用 Visual Studio 或命令行生成和运行服务**\n\n# <a name=\"visual-studio\"></a>[Visual Studio](#tab/vs)\n\n   1. 打开 **Visual Studio**。\n   1. 导航到 **文件** > **打开** > **项目/解决方案**。\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/VSopenfile.png\" alt-text=\"打开文件\":::\n\n   1. 从 **csharp** 文件夹中选择 **SidePanel.sln** 文件。\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/Tokenfileready.png\" alt-text=\"解决方案文件\":::\n\n   1. 按 **F5** 运行项目。\n\n   1. 如果出现以下对话框，请选择“**是**”：\n\n        :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/certificate.png\" alt-text=\"信任证书\":::\n\n      随即会打开一个网页，其中包含一条消息：**机器人已就绪！**\n\n       :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appisready.png\" alt-text=\"应用准备就绪\"::: \n\n    \n# <a name=\"command-line\"></a>[命令行](#tab/cli)\n\n在命令提示符窗口中导航到 **>会议侧窗格> csharp >侧面板的示** 例，并输入以下命令：\n\n```bash\ndotnet run\n```\n:::image type=\"content\" source=\"~/assets/images/meetings-side-panel/dotnetruncmd.png\" alt-text=\"Dotnet\"::: \n  \n"
- title: 将会议侧面板添加到 Teams
  durationInMinutes: 1
  content: "\n1. 在克隆的存储库中，导航到 **csharp >侧面板>清单**。\n\n1. 使用 **清单** 文件夹中存在的以下文件创建.zip： \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/zipfile.png\" alt-text=\"Zip 文件\"::: \n\n1. 创建一个与几个演示者和与会者的会议。\n\n1. 创建会议后，转到会议详细信息页，然后选择 **“添加应用**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addanapp.png\" alt-text=\"添加应用\":::\n\n1. 在弹出窗口中，选择 **“管理应用**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manageapps.png\" alt-text=\"管理应用\"::: \n\n1. 选择“**上传自定义应用**”。 \n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/uploadcustomapp.png\" alt-text=\"上传自定义应用\"::: \n\n1. 选择 **“打开** ”以上传在 **清单** 文件夹中创建的.zip文件。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/selectzip.png\" alt-text=\"选择 zip 文件\"::: \n\n1. 选择“**添加**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/addtheapp.png\" alt-text=\"添加应用\"::: \n\n   “ **管理应用** ”部分显示应用程序列表。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/manageappsection.png\" alt-text=\"管理应用中的应用\"::: \n\n1. 转到 Teams 会议。\n\n1. 选择“**添加应用**”。 \n\n   在应用选择页中，应用显示为 **侧面板**。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/appicon-1.png\" alt-text=\"Teams 中的应用图标\"::: \n\n1. 选择 **侧面板** 应用。\n\n1. 选择“**保存**”。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/welcomeapp.png\" alt-text=\"欢迎应用\"::: \n\n   应用在会议侧面板中可见。         \n"
- title: 在 Teams 中与应用交互
  durationInMinutes: 1
  content: "让我们在 Teams 中与应用交互！\n\n1. 选择 **“添加新议程项** ”，将新议程添加到默认议程列表。\n\n    :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/sidepanelinmeet.png\" alt-text=\"会议中的令牌\"::: \n\n1. 在列表中输入新的议程项，然后选择 **“添加**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/newagenda.png\" alt-text=\"会议中的令牌\"::: \n\n   新议程将添加到列表中。\n\n1. 选择 **“发布议程**”。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/youragenda.png\" alt-text=\"令牌\"::: \n\n   新的议程列表显示在会议聊天中。\n\n     :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/agendainchat.png\" alt-text=\"令牌\"::: \n"
- title: 完成质询
  durationInMinutes: 1
  content: "你想出了这样的事吗？\n\n   :::image type=\"content\" source=\"~/assets/images/meetings-side-panel/sidepanelondesktopmobile.png\" alt-text=\"会议中的令牌\"::: \n"
- content: 你已完成本教程以开始使用 **侧面板** 应用！
